---
layout: page-notitle
title: Try
permalink: /try.html
---

#Â how do you prefer to try it?

<br>

<section class="slice" id="questions" style="padding-top: 10px">
    <div class="container">
        <article class="col-sm-12 col-md-4">
            <section>
                <h3 style="text-align:center; margin-bottom: 25px;">From the command line</h3>
                <p>You can use curl or httpie to play with our demo instance.</p>
                <p>See below for a step by step tutorial.</p>
            </section>
        </article>
        <article class="col-sm-12 col-md-4">
            <section>
                <h3 style="text-align:center; margin-bottom: 25px;">Using the HAL browser</h3>
                <p>RESTHeart uses the <strong>H</strong>ypertext <strong>A</strong>pplication <strong>L</strong>anguage json representation format and embeds the brilliant <strong>HAL browser</strong>.</p>
                <p>Go and play with it on our demo instance at <a href="http://dbapi.io/browser/#/db/coll" target="_blank">dbapi.io</a>.</p>
            </section>
        </article>
        <article class="col-sm-12 col-md-4">
            <section>
                <h3 style="text-align:center; margin-bottom: 25px;">Looking the Notes demo web application</h3>
                <p>You can preview the notes web application at <a href="http://dbapi.io/notes" target="_blank">dbapi.io/notes</a>.</p>
                <p>The code is available on <a href="https://github.com/softinstigate/restheart-notes-example" target="_blank">github</a>.</p>
                <p>The application is described in the <a href="https://softinstigate.atlassian.net/wiki/x/AoBu" target="_blank">documentation</a>.</p>
            </section>
        </article>
    </div>
</section>


# Try it from the command line

The demo instance expose a collection at <code>http://dbapi.io/db/coll</code> without requiring authentication.
Access to any other MongoDB resoruces is forbidden.<br>
The database is presisted on an ephemeral storage and it is reset on regular basis, so feel free to play with it but don't rely on it.
{: .bs-callout .bs-callout-info }

<div class="row" style="margin-top: 20px">
    <div class="col-md-3" style="padding-top:7px">
        <p><strong>Create a document POSTing the collection.</strong></p>
        <p>Note the <code>Location</code> response header with the URI of the created resource that includes the ObjectId id generated by RESTHeart. Of course this will vary for you.</p>
    </div>
    <div class="col-md-9">
        {% highlight bash %}

$ curl -i -H "Content-Type: application/json" -X POST -d '{"name":"Andrea","message":"RESTHeart rocks!"}' http://dbapi.io/db/coll

HTTP/1.1 201 Created
Date: Wed, 04 Nov 2015 17:31:02 GMT
Content-Length: 0
Location: http://dbapi.io/db/coll/563a40d6e4b0ef984cae182b
Connection: keep-alive
Access-Control-Allow-Origin: *
ETag: 563a40d6e4b0ef984cae182c
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: Location, ETag, Auth-Token, Auth-Token-Valid-Until, Auth-Token-Location

        {% endhighlight %}
    </div>
</div>

<div class="row" style="margin-top: 20px">
    <div class="col-md-3" style="padding-top:7px">
        <p><strong>Create a second document via PUT using a document URI.</strong></p>
        <p>If a document with this id already exists, you'll get <code>HTTP/1.1 409 Conflict</code>:
        POST and PUT have upsert semantic. In case of update the ETag must be specified with the <code>If-Match</code> request header (to avoid ghost writes).</p>
    </div>
    <div class="col-md-9">
        {% highlight bash %}

$ curl -i -H "Content-Type: application/json" -X PUT -d '{"name":"Andrea","message":"MongoDB rocks as well!"}' http://dbapi.io/db/coll/1344

HTTP/1.1 201 Created
Date: Wed, 04 Nov 2015 17:37:39 GMT
Content-Length: 0
Connection: keep-alive
Access-Control-Allow-Origin: *
ETag: 563a4263e4b0ef984cae182d
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: Location, ETag, Auth-Token, Auth-Token-Valid-Until, Auth-Token-Location

        {% endhighlight %}
    </div>
</div>

<div class="row" style="margin-top: 20px">
    <div class="col-md-3" style="padding-top:7px">
        <p><strong>Update the second document via PATCH.</strong></p>
        <p>Notice the ETag, this must be specified in <code>If-Match</code> request header for the request to succeed.</p>
    </div>
    <div class="col-md-9">
        {% highlight bash %}

$ curl -i -H "Content-Type: application/json" -H "If-Match: 563a4263e4b0ef984cae182d" -X PATCH -d '{"newproperty":10}' http://dbapi.io/db/coll/1344

HTTP/1.1 200 OK
Date: Wed, 04 Nov 2015 17:50:27 GMT
Content-Length: 0
Connection: keep-alive
Access-Control-Allow-Origin: *
ETag: 563a4563e4b0ef984cae182f
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: Location, ETag, Auth-Token, Auth-Token-Valid-Until, Auth-Token-Location

        {% endhighlight %}
    </div>
</div>

<div class="row" style="margin-top: 20px">
    <div class="col-md-3" style="padding-top:7px">
        <p><strong>Get the second document.</strong></p>
        <p>The returned representation contains all the document properties plus few more. This is HAL format in action!</p>
    </div>
    <div class="col-md-9">
        {% highlight bash %}

$ curl http://dbapi.io/db/coll/1344

{
  "name": "Andrea",
  "message": "MongoDB rocks as well!",
  "newproperty": 10,
  "_embedded": { },
  "_links": {
    "self": {
      "href": "/db/coll/1344"
    },
    "rh:coll": {
      "href": "/db/coll"
    },
    "rh:document": {
      "href": "/db/coll/{docid}{?id_type}",
      "templated": true
    },
    "curies": [
      {
        "href": "http://restheart.org/curies/1.0/{rel}.html",
        "templated": true,
        "name": "rh"
      }
    ]
  },
  "_type": "DOCUMENT",
  "_id": "1344",
  "_etag": {
    "$oid": "563a4563e4b0ef984cae182f"
  },
  "_lastupdated_on": "2015-11-04T17:50:27Z"
}

        {% endhighlight %}
    </div>
</div>

<div class="row" style="margin-top: 20px">
    <div class="col-md-3" style="padding-top:7px">
        <p><strong>Find documents via query.</strong></p>
        <p>The <code>filter</code> query parameter allows to specify any MongoDB query.</p>
        <p>The matching documents are in the <code>_embedded.['rh:doc']</code> array.</p>
    </div>
    <div class="col-md-9">
        {% highlight js %}

$ curl http://dbapi.io/db/coll?filter='\{"name":"Andrea"\}'

{
  "_embedded": {
    "rh:doc": [
      {
        "name": "Andrea",
        "message": "RESTHeart rocks!",
        "_embedded": { },
        "_links": { ...omitted...  },
        "_type": "DOCUMENT",
        "_id": {
          "$oid": "563a40d6e4b0ef984cae182b"
        },
        "_etag": {
          "$oid": "563a40d6e4b0ef984cae182c"
        },
        "_lastupdated_on": "2015-11-04T17:31:02Z",
        "_created_on": "2015-11-04T17:31:02Z"
      },
      {
        "name": "Andrea",
        "message": "MongoDB rocks as well!",
        "newproperty": 10,  
        "_embedded": { },
        "_links": { ...omitted...  },
        "_type": "DOCUMENT",
        "_id": "1344",
        "_etag": {
          "$oid": "563a4563e4b0ef984cae182f"
        },
        "_lastupdated_on": "2015-11-04T17:50:27Z"
      }
    ]
  },
  "_links": { ...omitted...  },
  "_type": "COLLECTION",
  "_id": "coll",
  "descr": "the playground collection",
  "_created_on": "2015-11-04T14:12:20Z",
  "_etag": {
    "$oid": "563a1244e4b016170a163615"
  },
  "_lastupdated_on": "2015-11-04T14:12:20Z",
  "_collection-props-cached": false,
  "_returned": 2
}

        {% endhighlight %}
    </div>
</div>
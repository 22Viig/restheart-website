---
layout: page-notitle
title: Try
permalink: /try.html
---

<section class="slice" id="questions" style="padding-top: 30px">
    <div class="container">
        <article class="col-sm-12 col-md-4">
            <section>
                <h3 style="text-align:center; margin-bottom: 25px;">From the command line</h3>
                <p>Use <strong>curl</strong> or <strong>httpie</strong> to play with our demo instance.</p>
                <p>See below for a step by step tutorial.</p>
            </section>
        </article>
        <article class="col-sm-12 col-md-4">
            <section>
                <h3 style="text-align:center; margin-bottom: 25px;">Using the HAL browser</h3>
                <p>RESTHeart uses the <strong>H</strong>ypertext <strong>A</strong>pplication <strong>L</strong>anguage json representation format and embeds the <strong>HAL browser</strong>.</p>
                <p>Go and play with it on our demo instance at <a href="http://dbapi.io/browser/#/db/coll" target="_blank">dbapi.io</a>.</p>
            </section>
        </article>
        <article class="col-sm-12 col-md-4">
            <section>
                <h3 style="text-align:center; margin-bottom: 25px;">Looking the Notes example web application</h3>
                <p>You can preview the notes web application at <a href="http://dbapi.io/notes" target="_blank">dbapi.io/notes</a>.</p>
                <p>The code is available on <a href="https://github.com/softinstigate/restheart-notes-example" target="_blank">github</a>.</p>
                <p>The application is described in the <a href="https://softinstigate.atlassian.net/wiki/x/AoBu" target="_blank">documentation</a>.</p>
            </section>
        </article>
    </div>
</section>


# Try it from the command line

The demo instance exposes a collection at <code>http://dbapi.io/db/coll</code> without requiring authentication.
Access to any other MongoDB resoruces is forbidden.<br>
The database is presisted on an ephemeral storage and it is reset on regular basis: feel free to play with it but don't rely on it.
{: .bs-callout .bs-callout-info }

<div class="row" style="margin-top: 20px">
    <div class="col-md-3" style="padding-top:7px">
        <p><strong>Upsert the document with _id <i>docid</i> with <code>PUT /db/coll/docid</code></strong></p>
    </div>
    <div class="col-md-9">
        {% highlight bash %}

$ curl -i -H "Content-Type: application/json" -X PUT http://dbapi.io/db/coll/docid -d '{"from":"ujibang", "message":"RESTHeart rocks!!" }'

HTTP/1.1 201 Created
...

        {% endhighlight %}
    </div>
</div>

<div class="row" style="margin-top: 20px">
    <div class="col-md-3" style="padding-top:7px">
        <p><strong>GET the created document</strong></p>
    </div>
    <div class="col-md-9">
        {% highlight bash %}

$ curl http://dbapi.io/db/coll/docid

{
  "_etag" : { "$oid" : "57069cb9c9e77c00078dc780" },
  "_id" : "docid",
  "from" : "ujibang",
  "message" : "RESTHeart rocks"
}

        {% endhighlight %}
    </div>
</div>

<div class="row" style="margin-top: 20px">
    <div class="col-md-3" style="padding-top:7px">
        <p><strong>Create a second document with <code>POST /db/coll</code></strong></p>
        <p>If the _id is not specified in the request body, it will autogenerated as a new ObjectId, the <i>Location</i> response header specifies the URL of the new document.</p>
    </div>
    <div class="col-md-9">
        {% highlight bash %}

$ curl -i -H "Content-Type: application/json" -X POST http://dbapi.io/db/coll -d '{"from":"ujibang", "message": "MongoDB rocks as well!"}'

HTTP/1.1 201 Created
Location: http://dbapi.io/db/coll/563a40d6e4b0ef984cae182b
...

        {% endhighlight %}
    </div>
</div>

<div class="row" style="margin-top: 20px">
    <div class="col-md-3" style="padding-top:7px">
        <p><strong>Update the first document with PATCH /db/coll/docid</strong></p>
        <p>This request makes use of the dot notation and the <i>$currentDate</i> operator. These are available in all write requests!</p>
    </div>
    <div class="col-md-9">
        {% highlight bash %}

$ curl -i -H "Content-Type: application/json" -X PATCH http://dbapi.io/db/coll/docid -d '{"$currentDate": { "header.timestamp": true}}'

HTTP/1.1 200 OK
...

        {% endhighlight %}
    </div>
</div>

<div class="row" style="margin-top: 20px">
    <div class="col-md-3" style="padding-top:7px">
        <p><strong>Get the updated document again.</strong></p>
        <p>The returned representation contains all the document properties plus few more. The <i>_etag</i> is updated automatically by RESTHeart for web caching and gost writes management.</p>
    </div>
    <div class="col-md-9">
        {% highlight bash %}

$ curl http://dbapi.io/db/coll/docid

{
  "_etag" : { "$oid" : "5718d948c9e77c000609f677" },
  "_id" : "docid",
  "from" : "ujibang",
  "header" : { "timestamp" : { "$date" : 1475598488601 } },
  "message" : "RESTHeart rocks!!"
}

        {% endhighlight %}
    </div>
</div>

<div class="row" style="margin-top: 20px">
    <div class="col-md-3" style="padding-top:7px">
        <p><strong>Find documents via query.</strong></p>
        <p>The <code>filter</code> query parameter allows to specify any MongoDB query.</p>
        <p>The matching documents are in the <code>_embedded.['rh:doc']</code> array.</p>
    </div>
    <div class="col-md-9">
        {% highlight bash %}

$ curl http://dbapi.io/db/coll?filter='\{"from":"ujibang"\}'

{ "_embedded" : { "rh:doc" : [
          {
            "_etag" : { "$oid" : "57069cb9c9e77c00078dc780" },
            "_id" : "docid",
            "message" : "RESTHeart rocks!",
            "header" : { "timestamp" : { "$date" : 1461246280498 } },
            "from" : "ujibang"
          },
          {
            "_etag" : { "$oid" : "57175e2dc9e77c0006eb9ef4" },
            "_id" : { "$oid" : "563a40d6e4b0ef984cae182b" },
            "message" : "MongoDB rocks as well!",
            "from" : "ujibang"
          }
        ] },
  "_etag" : { "$oid" : "57f3d7d0c9e77c00075daae9" },
  "_id" : "coll",
  "_returned" : 2
}

        {% endhighlight %}
    </div>
</div>
